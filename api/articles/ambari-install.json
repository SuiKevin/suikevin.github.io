{"title":"Ambari安装Hadoop集群教程","uid":"26ca6bb559630836911bd4e42d633e9b","slug":"ambari-install","date":"2017-09-27T09:07:49.000Z","updated":"2025-03-22T07:23:11.949Z","comments":true,"path":"api/articles/ambari-install.json","keywords":null,"cover":null,"content":"<h1 id=\"Ambari安装Hadoop集群教程\"><a href=\"#Ambari安装Hadoop集群教程\" class=\"headerlink\" title=\"Ambari安装Hadoop集群教程\"></a>Ambari安装Hadoop集群教程</h1><h2 id=\"集群环境：\"><a href=\"#集群环境：\" class=\"headerlink\" title=\"集群环境：\"></a>集群环境：</h2><h3 id=\"阿里云服务器\"><a href=\"#阿里云服务器\" class=\"headerlink\" title=\"阿里云服务器\"></a>阿里云服务器</h3><h4 id=\"系统：\"><a href=\"#系统：\" class=\"headerlink\" title=\"系统：\"></a>系统：</h4><p>Centos7</p>\n<p>Linux master 3.10.0-514.16.1.el7.x86_64 #1 SMP Wed Apr 12 15:04:24 UTC 2017 x86_64 x86_64 x86_64 GNU&#x2F;Linux</p>\n<h4 id=\"配置：\"><a href=\"#配置：\" class=\"headerlink\" title=\"配置：\"></a>配置：</h4><p>master * 1 -&gt; CPU : 4 core RAM : 16G OS_DISK : 40G DATA_DISK : 1T</p>\n<p>slave * 2 -&gt; CPU : 4 core RAM : 8G OS_DISK : 40G DATA_DISK : 1T</p>\n<h2 id=\"版本\"><a href=\"#版本\" class=\"headerlink\" title=\"版本\"></a>版本</h2><h3 id=\"Ambari\"><a href=\"#Ambari\" class=\"headerlink\" title=\"Ambari\"></a>Ambari</h3><p>Ambari-2.5.2.0-centos7</p>\n<h3 id=\"HDP\"><a href=\"#HDP\" class=\"headerlink\" title=\"HDP\"></a>HDP</h3><p>HDP-2.6.1.0-centos7</p>\n<h3 id=\"HDP-UTILS\"><a href=\"#HDP-UTILS\" class=\"headerlink\" title=\"HDP-UTILS\"></a>HDP-UTILS</h3><p>HDP-UTILS-1.1.0.21-centos7</p>\n<h1 id=\"准备环境\"><a href=\"#准备环境\" class=\"headerlink\" title=\"准备环境\"></a>准备环境</h1><h2 id=\"pyenv-installation\"><a href=\"#pyenv-installation\" class=\"headerlink\" title=\"pyenv installation\"></a>pyenv installation</h2><p>使用pyenv创建虚拟python环境，可用来装anaconda环境，供pyspark程序使用</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#安装依赖</span><br><span class=\"line\">yum install readline readline-devel readline-static -y</span><br><span class=\"line\">yum install openssl openssl-devel openssl-static -y</span><br><span class=\"line\">yum install sqlite-devel -y</span><br><span class=\"line\">yum install bzip2-devel bzip2-libs -y</span><br><span class=\"line\">yum install git-core bzip2 -y</span><br><span class=\"line\"></span><br><span class=\"line\">#下载并执行自动安装脚本</span><br><span class=\"line\">curl -L https://raw.github.com/yyuu/pyenv-installer/master/bin/pyenv-installer | bash</span><br><span class=\"line\"></span><br><span class=\"line\">#添加下面代码到~/.bashrc</span><br><span class=\"line\">export PATH=&quot;/root/.pyenv/bin:$PATH&quot;</span><br><span class=\"line\">eval &quot;$(pyenv init -)&quot;</span><br><span class=\"line\">eval &quot;$(pyenv virtualenv-init -)&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">#下载python安装包</span><br><span class=\"line\">wget http://mirrors.sohu.com/python/3.6.2/Python-3.6.2.tar.xz</span><br><span class=\"line\"></span><br><span class=\"line\">#创建pyenv下载缓存目录</span><br><span class=\"line\">mkdir ~/.pyenv/cache</span><br><span class=\"line\"></span><br><span class=\"line\">#将已下载的python安装包复制到pyenv下载缓存目录</span><br><span class=\"line\">cp Python-3.6.2.tar.xz ~/.pyenv/cache</span><br><span class=\"line\"></span><br><span class=\"line\">#pyenv安装python，如果cache目录有对应版本安装包，就使用其进行安装，否则会在线下载安装包（墙内慢到死）</span><br><span class=\"line\">pyenv install 3.6.2</span><br><span class=\"line\"></span><br><span class=\"line\">#设置全局系统python版本（hadoop生态相关组件可能不支持python3）</span><br><span class=\"line\">#pyenv global 3.6.2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"nginx-installation\"><a href=\"#nginx-installation\" class=\"headerlink\" title=\"nginx installation\"></a>nginx installation</h2><p>使用nginx作为ambari离线仓库，进行ambari、HDP、HDP-Utils安装</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#安装nginx</span><br><span class=\"line\">yum install nginx -y</span><br><span class=\"line\"></span><br><span class=\"line\">#编辑nginx配置文件</span><br><span class=\"line\">vim /etc/nginx/nginx.conf</span><br><span class=\"line\">#修改80端口的server中的root目录为离线安装包的目录</span><br><span class=\"line\">root  /mnt/ambari;</span><br><span class=\"line\"></span><br><span class=\"line\">#测试nginx配置文件是否正确</span><br><span class=\"line\">nginx -t</span><br><span class=\"line\"></span><br><span class=\"line\">#启动nginx</span><br><span class=\"line\">nginx</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"配置集群免密登录\"><a href=\"#配置集群免密登录\" class=\"headerlink\" title=\"配置集群免密登录\"></a>配置集群免密登录</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#创建ssh密钥对</span><br><span class=\"line\">ssh-keygen</span><br><span class=\"line\"></span><br><span class=\"line\">#输出公钥到authorized_keys文件</span><br><span class=\"line\">cat id_rsa.pub &gt;&gt; authorized_keys</span><br><span class=\"line\"></span><br><span class=\"line\">#在集群中所有的服务器中创建.ssh目录</span><br><span class=\"line\">mkdir ~/.ssh</span><br><span class=\"line\"></span><br><span class=\"line\">#复制authorized_keys文件到集群所有机器上的.ssh目录中</span><br><span class=\"line\">#修改对应目录及文件权限</span><br><span class=\"line\">chmod 700 ~/.ssh</span><br><span class=\"line\">chmod 600 ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"配置DNS\"><a href=\"#配置DNS\" class=\"headerlink\" title=\"配置DNS\"></a>配置DNS</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/hosts</span><br><span class=\"line\">#在文件中添加集群所有机器的IP和FQDN，例如：</span><br><span class=\"line\">10.30.xxx.xx1 master</span><br><span class=\"line\">10.31.xxx.xx2 slave1</span><br><span class=\"line\">10.31.xxx.xx3 slave2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ntp-installation\"><a href=\"#ntp-installation\" class=\"headerlink\" title=\"ntp installation\"></a>ntp installation</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install -y ntp</span><br><span class=\"line\">chkconfig ntpd on</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"set-hostname\"><a href=\"#set-hostname\" class=\"headerlink\" title=\"set hostname\"></a>set hostname</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hostname master</span><br><span class=\"line\">#hostname slave1</span><br><span class=\"line\">#hostname slave2</span><br><span class=\"line\"></span><br><span class=\"line\">vim /etc/sysconfig/network</span><br><span class=\"line\">#添加/修改HOSTNAME</span><br><span class=\"line\">HOSTNAME=master</span><br><span class=\"line\">#HOSTNAME=slave1</span><br><span class=\"line\">#HOSTNAME=slave2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"关闭防火墙（CENTOS-7）\"><a href=\"#关闭防火墙（CENTOS-7）\" class=\"headerlink\" title=\"关闭防火墙（CENTOS 7）\"></a>关闭防火墙（CENTOS 7）</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chkconfig firewalld off</span><br><span class=\"line\">service firewalld stop</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"禁用selinux\"><a href=\"#禁用selinux\" class=\"headerlink\" title=\"禁用selinux\"></a>禁用selinux</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#查看selinux状态</span><br><span class=\"line\">sestatus</span><br><span class=\"line\"></span><br><span class=\"line\">#禁用selinux</span><br><span class=\"line\">vim /etc/yum/pluginconf.d/refresh-packagekit.conf</span><br><span class=\"line\">setenforce 0</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"检查umask值\"><a href=\"#检查umask值\" class=\"headerlink\" title=\"检查umask值\"></a>检查umask值</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#检查umask值</span><br><span class=\"line\">umask</span><br><span class=\"line\"></span><br><span class=\"line\">#设置umask值</span><br><span class=\"line\">echo umask 0022 &gt;&gt; /etc/profile</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"开启PackageKit\"><a href=\"#开启PackageKit\" class=\"headerlink\" title=\"开启PackageKit\"></a>开启PackageKit</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/yum/pluginconf.d/refresh-packagekit.conf</span><br><span class=\"line\">enabled=0</span><br></pre></td></tr></table></figure>\n\n\n<h1 id=\"安装ambari\"><a href=\"#安装ambari\" class=\"headerlink\" title=\"安装ambari\"></a>安装ambari</h1><h2 id=\"添加本地仓库\"><a href=\"#添加本地仓库\" class=\"headerlink\" title=\"添加本地仓库\"></a>添加本地仓库</h2><p><strong>Ambari Base URL</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://&lt;web.server&gt;/Ambari-2.5.1.0/&lt;OS&gt;</span><br><span class=\"line\">http://master/ambari/centos7</span><br></pre></td></tr></table></figure>\n<p><strong>HDF Base URL</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://&lt;web.server&gt;/hdf/HDF/&lt;OS&gt;/3.x/updates/&lt;latest.version&gt;</span><br><span class=\"line\">http://&lt;web.server&gt;/hdp/HDP/&lt;OS&gt;/2.x/updates/&lt;latest.version&gt;</span><br><span class=\"line\">http://master/HDP/centos7</span><br></pre></td></tr></table></figure>\n<p><strong>HDP-UTILS Base URL</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://&lt;web.server&gt;/hdp/HDP-UTILS-&lt;version&gt;/repos/&lt;OS&gt;</span><br><span class=\"line\">http://master/HDP-UTILS-1.1.0.21</span><br></pre></td></tr></table></figure>\n\n<p><strong>创建ambari.repo文件</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/yum.repos.d/ambari.repo</span><br><span class=\"line\"></span><br><span class=\"line\">[Updates-Ambari-2.5.2.0]</span><br><span class=\"line\">name=Ambari-2.5.2.0-Updates</span><br><span class=\"line\">baseurl=http://10.30.xxx.xx1/ambari/centos7</span><br><span class=\"line\">gpgcheck=1</span><br><span class=\"line\">gpgkey=http://10.30.xxx.xx1/ambari/centos7/RPM-GPG-KEY/RPM-GPG-KEY-Jenkins</span><br><span class=\"line\">enabled=1</span><br><span class=\"line\">priority=1</span><br></pre></td></tr></table></figure>\n\n<p><strong>Optional: If you have multiple repositories configured in your environment, deploy the following plug-in on all the nodes in your cluster.</strong></p>\n<p>a.\tInstall the plug-in.</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install yum-plugin-priorities</span><br></pre></td></tr></table></figure>\n\n<p>b.\tEdit the &#x2F;etc&#x2F;yum&#x2F;pluginconf.d&#x2F;priorities.conf file to add the following:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[main]</span><br><span class=\"line\">enabled=1</span><br><span class=\"line\">gpgcheck=0</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"下载离线安装包\"><a href=\"#下载离线安装包\" class=\"headerlink\" title=\"下载离线安装包\"></a>下载离线安装包</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#ambari离线安装包</span><br><span class=\"line\">wget http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.5.1.0/ambari-2.5.1.0-centos7.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">#HDP安装包版本信息</span><br><span class=\"line\">wget http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.1.0/HDP-2.6.1.0-129.xml</span><br><span class=\"line\">#HDP离线安装包</span><br><span class=\"line\">wget http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.1.0/HDP-2.6.1.0-centos7-rpm.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">#HDP-UTILS离线安装包</span><br><span class=\"line\">wget http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.21/repos/centos7/HDP-UTILS-1.1.0.21-centos7.tar.gz</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"安装ambari-server\"><a href=\"#安装ambari-server\" class=\"headerlink\" title=\"安装ambari-server\"></a>安装ambari-server</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install ambari-server -y</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"配置ambari-server\"><a href=\"#配置ambari-server\" class=\"headerlink\" title=\"配置ambari-server\"></a>配置ambari-server</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ambari-server setup</span><br></pre></td></tr></table></figure>\n<p><strong>如果jdk安装过慢，先下载好jdk安装包再安装ambari-server</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#ambari原始jdk下载地址</span><br><span class=\"line\">#wget http://public-repo-1.hortonworks.com/ARTIFACTS/jdk-8u112-linux-x64.tar.gz -O /var/lib/ambari-server/resources/jdk-8u112-linux-x64.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">#oracle官网jdk下载地址</span><br><span class=\"line\">#wget --no-cookies \\</span><br><span class=\"line\">#--no-check-certificate \\</span><br><span class=\"line\">#--header &quot;Cookie: oraclelicense=accept-securebackup-cookie&quot; \\</span><br><span class=\"line\">#&quot;http://public-repo-1.hortonworks.com/ARTIFACTS/jdk-8u112-linux-x64.tar.gz&quot; \\</span><br><span class=\"line\">#-O /var/lib/ambari-server/resources/jdk-8u112-linux-x64.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">#国内jdk镜像下载地址[推荐]</span><br><span class=\"line\">wget http://mirrors.linuxeye.com/jdk/jdk-8u112-linux-x64.tar.gz -O /var/lib/ambari-server/resources/jdk-8u112-linux-x64.tar.gz</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"启动ambari-server\"><a href=\"#启动ambari-server\" class=\"headerlink\" title=\"启动ambari-server\"></a>启动ambari-server</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ambari-server start</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ambari访问地址\"><a href=\"#ambari访问地址\" class=\"headerlink\" title=\"ambari访问地址\"></a>ambari访问地址</h2><p><a href=\"http://master:8080/\">http://master:8080</a></p>\n<h1 id=\"建立集群\"><a href=\"#建立集群\" class=\"headerlink\" title=\"建立集群\"></a>建立集群</h1><h2 id=\"add-version\"><a href=\"#add-version\" class=\"headerlink\" title=\"add version\"></a>add version</h2><p><a href=\"http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.1.0/HDP-2.6.1.0-129.xml\">http://public-repo-1.hortonworks.com/HDP/centos7/2.x/updates/2.6.1.0/HDP-2.6.1.0-129.xml</a></p>\n<h2 id=\"add-cluster\"><a href=\"#add-cluster\" class=\"headerlink\" title=\"add cluster\"></a>add cluster</h2><p><strong>cluster FQDNs</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">master</span><br><span class=\"line\">slave1</span><br><span class=\"line\">slave2</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"添加私钥文件\"><a href=\"#添加私钥文件\" class=\"headerlink\" title=\"添加私钥文件\"></a>添加私钥文件</h2><p><strong>id_rsa</strong></p>\n<h1 id=\"Error1\"><a href=\"#Error1\" class=\"headerlink\" title=\"Error1\"></a>Error1</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># slave1: parent directory /usr/hdp/current/hadoop-client/conf doesn&#x27;t exist</span><br><span class=\"line\"></span><br><span class=\"line\">创建对应目录</span><br></pre></td></tr></table></figure>\n\n\n<h1 id=\"Note1\"><a href=\"#Note1\" class=\"headerlink\" title=\"Note1\"></a>Note1</h1><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># read file from hdfs url</span><br><span class=\"line\"></span><br><span class=\"line\">hdfs://+path</span><br><span class=\"line\"></span><br><span class=\"line\"># example: hdfs:///tmp/ProjectFile/*.dat</span><br><span class=\"line\"></span><br><span class=\"line\"># note: // is protocol, / is root</span><br></pre></td></tr></table></figure>\n","text":"Ambari安装Hadoop集群教程集群环境：阿里云服务器系统：Centos7 Linux master 3.10.0-514.16.1.el7.x86_64 ...","permalink":"/post/ambari-install","photos":[],"count_time":{"symbolsCount":"5k","symbolsTime":"5 mins."},"categories":[{"name":"Big Data","slug":"Big-Data","count":6,"path":"api/categories/Big-Data.json"}],"tags":[{"name":"Ambari","slug":"Ambari","count":2,"path":"api/tags/Ambari.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Ambari%E5%AE%89%E8%A3%85Hadoop%E9%9B%86%E7%BE%A4%E6%95%99%E7%A8%8B\"><span class=\"toc-text\">Ambari安装Hadoop集群教程</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83%EF%BC%9A\"><span class=\"toc-text\">集群环境：</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8\"><span class=\"toc-text\">阿里云服务器</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%B3%BB%E7%BB%9F%EF%BC%9A\"><span class=\"toc-text\">系统：</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%EF%BC%9A\"><span class=\"toc-text\">配置：</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%89%88%E6%9C%AC\"><span class=\"toc-text\">版本</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Ambari\"><span class=\"toc-text\">Ambari</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#HDP\"><span class=\"toc-text\">HDP</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#HDP-UTILS\"><span class=\"toc-text\">HDP-UTILS</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%87%86%E5%A4%87%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">准备环境</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#pyenv-installation\"><span class=\"toc-text\">pyenv installation</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#nginx-installation\"><span class=\"toc-text\">nginx installation</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E9%9B%86%E7%BE%A4%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95\"><span class=\"toc-text\">配置集群免密登录</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AEDNS\"><span class=\"toc-text\">配置DNS</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ntp-installation\"><span class=\"toc-text\">ntp installation</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#set-hostname\"><span class=\"toc-text\">set hostname</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99%EF%BC%88CENTOS-7%EF%BC%89\"><span class=\"toc-text\">关闭防火墙（CENTOS 7）</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%A6%81%E7%94%A8selinux\"><span class=\"toc-text\">禁用selinux</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A3%80%E6%9F%A5umask%E5%80%BC\"><span class=\"toc-text\">检查umask值</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%BC%80%E5%90%AFPackageKit\"><span class=\"toc-text\">开启PackageKit</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85ambari\"><span class=\"toc-text\">安装ambari</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93\"><span class=\"toc-text\">添加本地仓库</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%B8%8B%E8%BD%BD%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85%E5%8C%85\"><span class=\"toc-text\">下载离线安装包</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85ambari-server\"><span class=\"toc-text\">安装ambari-server</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AEambari-server\"><span class=\"toc-text\">配置ambari-server</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8ambari-server\"><span class=\"toc-text\">启动ambari-server</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ambari%E8%AE%BF%E9%97%AE%E5%9C%B0%E5%9D%80\"><span class=\"toc-text\">ambari访问地址</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%BB%BA%E7%AB%8B%E9%9B%86%E7%BE%A4\"><span class=\"toc-text\">建立集群</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#add-version\"><span class=\"toc-text\">add version</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#add-cluster\"><span class=\"toc-text\">add cluster</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0%E7%A7%81%E9%92%A5%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">添加私钥文件</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Error1\"><span class=\"toc-text\">Error1</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Note1\"><span class=\"toc-text\">Note1</span></a></li></ol>","author":{"name":"Kevin","slug":"blog-author","avatar":"/static/kevin_logo_x_s1.png","link":"/","description":"AI/FS/BD/WEB/New Media","socials":{"github":"https://github.com/SuiKevin","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"配置Zeppelin使用Apache Shiro进行鉴权（多用户登录）","uid":"98e85a349358aba091f9064f5f1ca497","slug":"ambari-zeppelin-shiro","date":"2017-09-27T10:51:57.000Z","updated":"2025-03-22T06:52:44.924Z","comments":true,"path":"api/articles/ambari-zeppelin-shiro.json","keywords":null,"cover":null,"text":"配置Zeppelin使用Apache Shiro进行鉴权（多用户登录）本人使用的Ambari搭建的Hadoop集群，Zeppelin也是Ambari管理的集群中...","permalink":"/post/ambari-zeppelin-shiro","photos":[],"count_time":{"symbolsCount":"5k","symbolsTime":"5 mins."},"categories":[{"name":"Big Data","slug":"Big-Data","count":6,"path":"api/categories/Big-Data.json"}],"tags":[{"name":"Ambari","slug":"Ambari","count":2,"path":"api/tags/Ambari.json"},{"name":"Zeppelin","slug":"Zeppelin","count":3,"path":"api/tags/Zeppelin.json"},{"name":"Shiro","slug":"Shiro","count":2,"path":"api/tags/Shiro.json"},{"name":"Hadoop","slug":"Hadoop","count":5,"path":"api/tags/Hadoop.json"}],"author":{"name":"Kevin","slug":"blog-author","avatar":"/static/kevin_logo_x_s1.png","link":"/","description":"AI/FS/BD/WEB/New Media","socials":{"github":"https://github.com/SuiKevin","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"OpenCC安装及错误处理","uid":"ec9899f8bcf59da54011b603ddf86181","slug":"opencc-installation-error","date":"2017-09-20T09:38:30.000Z","updated":"2025-03-22T06:09:01.549Z","comments":true,"path":"api/articles/opencc-installation-error.json","keywords":null,"cover":null,"text":"Compile and Install OpenCC on Minimal CentOS 7測試過程在虛擬機中進行，使用vm搭建，操作系統版本CentOS Li...","permalink":"/post/opencc-installation-error","photos":[],"count_time":{"symbolsCount":"4.4k","symbolsTime":"4 mins."},"categories":[{"name":"Linux","slug":"Linux","count":1,"path":"api/categories/Linux.json"}],"tags":[{"name":"Linux","slug":"Linux","count":3,"path":"api/tags/Linux.json"},{"name":"OpenCC","slug":"OpenCC","count":2,"path":"api/tags/OpenCC.json"},{"name":"CentOS","slug":"CentOS","count":2,"path":"api/tags/CentOS.json"}],"author":{"name":"Kevin","slug":"blog-author","avatar":"/static/kevin_logo_x_s1.png","link":"/","description":"AI/FS/BD/WEB/New Media","socials":{"github":"https://github.com/SuiKevin","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}