{"title":"Hadoop Notes","uid":"0d796f28558c1909e22d612dcdac7f4d","slug":"hadoop-notes","date":"2017-09-30T04:17:23.000Z","updated":"2025-03-22T07:26:03.434Z","comments":true,"path":"api/articles/hadoop-notes.json","keywords":null,"cover":[],"content":"<h1 id=\"Hadoop-Notes\"><a href=\"#Hadoop-Notes\" class=\"headerlink\" title=\"Hadoop Notes\"></a>Hadoop Notes</h1><h2 id=\"Note1\"><a href=\"#Note1\" class=\"headerlink\" title=\"Note1\"></a>Note1</h2><h3 id=\"问题描述\"><a href=\"#问题描述\" class=\"headerlink\" title=\"问题描述\"></a>问题描述</h3><p>Yarn不能同时运行多个application</p>\n<h3 id=\"问题分析\"><a href=\"#问题分析\" class=\"headerlink\" title=\"问题分析\"></a>问题分析</h3><p>经观察<a href=\"http://master:8088/cluster\">ResourceManager UI</a></p>\n<div align=center><img src=\"http://www.kevinsui.com/static/upload/yarn scheduler metrics.png\" width=\"800px\"/></div>\n\n<p>与执行命令</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>HADOOP_USER_NAME&#x3D;hdfs .&#x2F;bin&#x2F;spark-submit –master yarn –deploy-mode cluster <code>--driver-memory 2g --executor-memory 2g</code> –executor-cores 1 –queue default examples&#x2F;src&#x2F;main&#x2F;python&#x2F;pi.py 10</p></blockquote>\n<p>发现单个application申请的资源（内存、CPU）超过单个node上最大资源一半，导致没有足够资源供其余application运行，所以多个application同时运行时，后提交的application会等待有足够的资源时再运行。</p>\n<h3 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h3><p>在Ambari中设置YARN的Memory和CPU</p>\n<div align=center><img src=\"http://www.kevinsui.com/static/upload/yarn memory cpu.png\" width=\"800px\"/></div>\n\n<p>调整执行命令中的内存大小，使之不超过YARN配置中设置的大小，合理安排内存，<code>Memory for Node / Application Memory = Num of Application</code></p>\n<h2 id=\"Note2\"><a href=\"#Note2\" class=\"headerlink\" title=\"Note2\"></a>Note2</h2><h3 id=\"问题描述-1\"><a href=\"#问题描述-1\" class=\"headerlink\" title=\"问题描述\"></a>问题描述</h3><p>HST Agent 无法启动</p>\n<p>hst-agent.log</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INFO 2017-09-30 11:55:06,287 security.py:178 - Server certificate not exists, downloading</span><br><span class=\"line\">INFO 2017-09-30 11:55:06,287 security.py:191 - Downloading server cert from https://slave2:9440/cert/ca/</span><br><span class=\"line\">ERROR 2017-09-30 11:55:06,345 ServerAPI.py:84 - GET https://slave2:9441/api/v1/hst_agents/slave2 failed. (SSLError(1, u&#x27;[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:579)&#x27;),)</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"原因\"><a href=\"#原因\" class=\"headerlink\" title=\"原因\"></a>原因</h3><p>未注册并配置SmartSense Account</p>\n<div align=center><img src=\"http://www.kevinsui.com/static/upload/smartsense-hst-agent-error.png\" width=\"800px\"/></div>","text":"Hadoop NotesNote1问题描述Yarn不能同时运行多个application 问题分析经观察ResourceManager UI 与执行命令 HAD...","permalink":"/post/hadoop-notes","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"Big Data","slug":"Big-Data","count":6,"path":"api/categories/Big-Data.json"}],"tags":[{"name":"Hadoop","slug":"Hadoop","count":5,"path":"api/tags/Hadoop.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Hadoop-Notes\"><span class=\"toc-text\">Hadoop Notes</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Note1\"><span class=\"toc-text\">Note1</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0\"><span class=\"toc-text\">问题描述</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90\"><span class=\"toc-text\">问题分析</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">解决方法</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Note2\"><span class=\"toc-text\">Note2</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0-1\"><span class=\"toc-text\">问题描述</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8E%9F%E5%9B%A0\"><span class=\"toc-text\">原因</span></a></li></ol></li></ol></li></ol>","author":{"name":"Kevin","slug":"blog-author","avatar":"/static/kevin_logo_x_s1.png","link":"/","description":"AI/FS/BD/WEB/New Media","socials":{"github":"https://github.com/SuiKevin","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Hadoop生态部分组件介绍","uid":"f600e8de35fac4a36aec15d10c646ff1","slug":"hadoop-components","date":"2017-10-09T07:51:17.000Z","updated":"2025-03-22T07:26:00.505Z","comments":true,"path":"api/articles/hadoop-components.json","keywords":null,"cover":null,"text":"Apache Hadoop Apache Hadoop是一款支持数据密集型分布式应用程序并以Apache 2.0许可协议发布的开源软件框架。它支持在商品硬件构建...","permalink":"/post/hadoop-components","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"Big Data","slug":"Big-Data","count":6,"path":"api/categories/Big-Data.json"}],"tags":[{"name":"Zeppelin","slug":"Zeppelin","count":3,"path":"api/tags/Zeppelin.json"},{"name":"Shiro","slug":"Shiro","count":2,"path":"api/tags/Shiro.json"},{"name":"Hadoop","slug":"Hadoop","count":5,"path":"api/tags/Hadoop.json"},{"name":"Spark","slug":"Spark","count":1,"path":"api/tags/Spark.json"},{"name":"Livy","slug":"Livy","count":1,"path":"api/tags/Livy.json"}],"author":{"name":"Kevin","slug":"blog-author","avatar":"/static/kevin_logo_x_s1.png","link":"/","description":"AI/FS/BD/WEB/New Media","socials":{"github":"https://github.com/SuiKevin","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"配置Zeppelin使用Apache Shiro进行鉴权（多用户登录）","uid":"98e85a349358aba091f9064f5f1ca497","slug":"ambari-zeppelin-shiro","date":"2017-09-27T10:51:57.000Z","updated":"2025-03-22T07:25:58.162Z","comments":true,"path":"api/articles/ambari-zeppelin-shiro.json","keywords":null,"cover":null,"text":"配置Zeppelin使用Apache Shiro进行鉴权（多用户登录）本人使用的Ambari搭建的Hadoop集群，Zeppelin也是Ambari管理的集群中...","permalink":"/post/ambari-zeppelin-shiro","photos":[],"count_time":{"symbolsCount":"5k","symbolsTime":"5 mins."},"categories":[{"name":"Big Data","slug":"Big-Data","count":6,"path":"api/categories/Big-Data.json"}],"tags":[{"name":"Ambari","slug":"Ambari","count":2,"path":"api/tags/Ambari.json"},{"name":"Zeppelin","slug":"Zeppelin","count":3,"path":"api/tags/Zeppelin.json"},{"name":"Shiro","slug":"Shiro","count":2,"path":"api/tags/Shiro.json"},{"name":"Hadoop","slug":"Hadoop","count":5,"path":"api/tags/Hadoop.json"}],"author":{"name":"Kevin","slug":"blog-author","avatar":"/static/kevin_logo_x_s1.png","link":"/","description":"AI/FS/BD/WEB/New Media","socials":{"github":"https://github.com/SuiKevin","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}