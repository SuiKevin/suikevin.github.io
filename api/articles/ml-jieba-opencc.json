{"title":"Compile and Install OpenCC on Minimal CentOS 7","uid":"34e2a32717145682320598ec6f8d1d99","slug":"ml-jieba-opencc","date":"2024-11-18T05:40:13.000Z","updated":"2025-03-22T06:20:52.899Z","comments":true,"path":"api/articles/ml-jieba-opencc.json","keywords":null,"cover":null,"content":"<h1 id=\"Compile-and-Install-OpenCC-on-Minimal-CentOS-7\"><a href=\"#Compile-and-Install-OpenCC-on-Minimal-CentOS-7\" class=\"headerlink\" title=\"Compile and Install OpenCC on Minimal CentOS 7\"></a>Compile and Install OpenCC on Minimal CentOS 7</h1><p>測試過程在虛擬機中進行，使用vm搭建，操作系統版本<code>CentOS Linux release 7.2.1511 (Core)</code>，內核版本<code>3.10.0-327.10.1.el7.x86_64</code>。</p>\n<h2 id=\"Downloading-Uncompressing\"><a href=\"#Downloading-Uncompressing\" class=\"headerlink\" title=\"Downloading &amp; Uncompressing\"></a>Downloading &amp; Uncompressing</h2><hr>\n<p><code>OpenCC</code>代碼開源，公佈在GitHub上，地址 <a href=\"https://github.com/BYVoid/OpenCC\">https://github.com/BYVoid/OpenCC</a>，使用<code>wegt</code>命令下載，保存路徑爲<code>/usr/local/src</code>。</p>\n<p>執行命令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo wget https://github.com/BYVoid/OpenCC/archive/master.zip</span><br><span class=\"line\">#重命名</span><br><span class=\"line\">sudo mv master.zip opencc.zip</span><br></pre></td></tr></table></figure>\n<p>文件是zip格式壓縮包，需要安裝unzip命令，否則會報錯</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-bash: unzip: command not found</span><br></pre></td></tr></table></figure>\n\n<p>執行命令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum -y install unzip</span><br></pre></td></tr></table></figure>\n<p>執行<code>unzip</code>命令解壓到當前目錄</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo unzip opencc.zip</span><br><span class=\"line\">[vagrant@opencc src]$ ls -lh</span><br><span class=\"line\">total 1.8M</span><br><span class=\"line\">drwxr-xr-x. 9 root root 4.0K Mar 10 21:57 OpenCC-master</span><br><span class=\"line\">-rw-r--r--. 1 root root 1.8M Mar 22 21:05 opencc.zip</span><br><span class=\"line\">[vagrant@opencc src]$</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Compilation\"><a href=\"#Compilation\" class=\"headerlink\" title=\"Compilation\"></a>Compilation</h2><hr>\n<p>編譯主要2步：<code>make</code>, <code>make install</code>，提示<code>gcc 4.6 is required</code>。</p>\n<p>安裝OpenCC需安裝以下依賴包</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum install -y cmake gcc gcc-c++ doxygen</span><br></pre></td></tr></table></figure>\n<p>爲<code>/usr/lib/libopencc.so.2`創建符號鏈接至</code>&#x2F;usr&#x2F;lib64&#x2F;libopencc.so.2&#96;</p>\n<p>以下是摸索過程</p>\n<p><strong>Error1</strong></p>\n<p>進入目錄後，執行sudo make，報錯</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cmake: command not found</span><br></pre></td></tr></table></figure>\n<p>安裝cmake解決，執行命令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum install -y cmake</span><br></pre></td></tr></table></figure>\n<p><strong>Error2</strong></p>\n<p>再次執行<code>sudo make</code>，報錯</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CMake Error: CMAKE_CXX_COMPILER not set</span><br></pre></td></tr></table></figure>\n<p>因已安裝gcc，故安裝gcc-c++，執行命令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum install -y gcc-c++</span><br></pre></td></tr></table></figure>\n<p><strong>Error3</strong></p>\n<p>報錯</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Could NOT find Doxygen (missing:  DOXYGEN_EXECUTABLE)</span><br></pre></td></tr></table></figure>\n<p>安裝<code>doxygen</code>，執行命令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo yum install -y doxygen</span><br></pre></td></tr></table></figure>\n<p>再次執行<code>sudo make</code>，正常編譯</p>\n<p>執行<code>make make install</code>安裝</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[vagrant@opencc OpenCC-master]$ which opencc</span><br><span class=\"line\">/usr/bin/opencc</span><br><span class=\"line\">[vagrant@opencc OpenCC-master]$</span><br></pre></td></tr></table></figure>\n<p><strong>Error4</strong></p>\n<p>執行命令<code>opencc --help</code>報錯</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">opencc: error while loading shared libraries: libopencc.so.2: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure>\n<p>查找文件<code>libopencc.so.2</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[vagrant@opencc OpenCC-master]$ sudo find / -name libopencc.so.2</span><br><span class=\"line\">/usr/local/src/OpenCC-master/build/rel/src/libopencc.so.2</span><br><span class=\"line\">/usr/lib/libopencc.so.2</span><br></pre></td></tr></table></figure>\n<p>根據<a href=\"http://www.linuxdown.net/install/soft/2016/0122/4445.html\">繁体转简体，CentOS安装OpenCC，升级到gcc4.6</a>，創建符號鏈接至&#x2F;usr&#x2F;lib64&#x2F;目錄下</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[vagrant@opencc OpenCC-master]$ sudo ln -s /usr/lib/libopencc.so.2 /usr/lib64/libopencc.so.2</span><br><span class=\"line\">[vagrant@opencc OpenCC-master]$ opencc --version</span><br><span class=\"line\">Open Chinese Convert (OpenCC) Command Line Tool</span><br><span class=\"line\">Version: 1.0.3</span><br><span class=\"line\">[vagrant@opencc OpenCC-master]$</span><br></pre></td></tr></table></figure>\n<p>成功安裝</p>\n<p><strong>Error5</strong><br>执行</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">opencc -i wiki.zh.text -o wiki.zh.text.jian -c zht2zhs.ini</span><br></pre></td></tr></table></figure>\n<p>报错</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PARSE JSON ERROR</span><br></pre></td></tr></table></figure>\n<p>use xxx.json file instead of xxx.ini</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">opencc -i wiki.zh.text -o wiki.zh.text.jian -c t2s.json</span><br></pre></td></tr></table></figure>\n<p>example dir -&gt; &#x2F;usr&#x2F;share&#x2F;opencc&#x2F;</p>\n<h2 id=\"Usage\"><a href=\"#Usage\" class=\"headerlink\" title=\"Usage\"></a>Usage</h2><hr>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Usage:</span><br><span class=\"line\">   opencc  [--noflush &lt;bool&gt;] [-i &lt;file&gt;] [-o &lt;file&gt;] [-c &lt;file&gt;] [--]</span><br><span class=\"line\">           [--version] [-h]</span><br><span class=\"line\">Options:</span><br><span class=\"line\">   --noflush &lt;bool&gt;</span><br><span class=\"line\">     Disable flush for every line</span><br><span class=\"line\">   -i &lt;file&gt;,  --input &lt;file&gt;</span><br><span class=\"line\">     Read original text from &lt;file&gt;.</span><br><span class=\"line\">   -o &lt;file&gt;,  --output &lt;file&gt;</span><br><span class=\"line\">     Write converted text to &lt;file&gt;.</span><br><span class=\"line\">   -c &lt;file&gt;,  --config &lt;file&gt;</span><br><span class=\"line\">     Configuration file</span><br><span class=\"line\">   --,  --ignore_rest</span><br><span class=\"line\">     Ignores the rest of the labeled arguments following this flag.</span><br><span class=\"line\">   --version</span><br><span class=\"line\">     Displays version information and exits.</span><br><span class=\"line\">   -h,  --help</span><br><span class=\"line\">     Displays usage information and exits.</span><br></pre></td></tr></table></figure>\n<ul>\n<li>-i: 指定輸入文件</li>\n<li>-o: 指定轉換後的輸出文件</li>\n<li>-c: 指定配置文件，以何種形式轉換</li>\n</ul>\n<p>配置文件有如下幾種：</p>\n<ul>\n<li><code>s2t.json</code> Simplified Chinese to Traditional Chinese 簡體到繁體</li>\n<li><code>t2s.json</code> Traditional Chinese to Simplified Chinese 繁體到簡體</li>\n<li><code>s2tw.json</code> Simplified Chinese to Traditional Chinese (Taiwan Standard) 簡體到臺灣正體</li>\n<li><code>tw2s.json</code> Traditional Chinese (Taiwan Standard) to Simplified Chinese 臺灣正體到簡體</li>\n<li><code>s2hk.json</code> Simplified Chinese to Traditional Chinese (Hong Kong Standard) 簡&gt;體到香港繁體（香港小學學習字詞表標準）</li>\n<li><code>hk2s.json</code> Traditional Chinese (Hong Kong Standard) to Simplified Chinese 香&gt;港繁體（香港小學學習字詞表標準）到簡體</li>\n<li><code>s2twp.json</code> Simplified Chinese to Traditional Chinese (Taiwan Standard) with Taiwanese idiom 簡體到繁體（臺灣正體標準）並轉* 換爲臺灣常用詞彙</li>\n<li><code>tw2sp.json</code> Traditional Chinese (Taiwan Standard) to Simplified Chinese with Mainland Chinese idiom 繁體（臺灣正體標準）到簡* 體並轉換爲中國大陸常用詞彙</li>\n<li><code>t2tw.json</code> Traditional Chinese (OpenCC Standard) to Taiwan Standard 繁體（OpenCC 標準）到臺灣正體</li>\n<li><code>t2hk.json</code> Traditional Chinese (OpenCC Standard) to Hong Kong Standard 繁體（OpenCC 標準）到香港繁體（香港小學學習字詞表標準）</li>\n</ul>\n<h2 id=\"Usage-Example\"><a href=\"#Usage-Example\" class=\"headerlink\" title=\"Usage Example\"></a>Usage Example</h2><hr>\n<p><strong>Example1</strong></p>\n<p>使用配置文件<code>tw2s</code>將正體文件轉換爲簡體</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[vagrant@opencc tmp]$ ls</span><br><span class=\"line\">tw.txt</span><br><span class=\"line\">[vagrant@opencc tmp]$ cat tw.txt</span><br><span class=\"line\">昨夜西風凋碧樹，獨上高樓，望盡天涯路</span><br><span class=\"line\">[vagrant@opencc tmp]$ opencc -i tw.txt -o cn.txt -c tw2s</span><br><span class=\"line\">[vagrant@opencc tmp]$ ls</span><br><span class=\"line\">cn.txt  tw.txt</span><br><span class=\"line\">[vagrant@opencc tmp]$ cat cn.txt</span><br><span class=\"line\">昨夜西风凋碧树，独上高楼，望尽天涯路</span><br><span class=\"line\">[vagrant@opencc tmp]$ cat tw.txt</span><br><span class=\"line\">昨夜西風凋碧樹，獨上高樓，望盡天涯路</span><br><span class=\"line\">[vagrant@opencc tmp]$</span><br></pre></td></tr></table></figure>\n<p><strong>Example2</strong></p>\n<p>使用管道符<code>|</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[vagrant@opencc tmp]$ cat tw.txt</span><br><span class=\"line\">昨夜西風凋碧樹，獨上高樓，望盡天涯路</span><br><span class=\"line\">[vagrant@opencc tmp]$ cat tw.txt | opencc -c tw2s</span><br><span class=\"line\">昨夜西风凋碧树，独上高楼，望尽天涯路</span><br><span class=\"line\">[vagrant@opencc tmp]$</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><hr>\n<ul>\n<li><a href=\"https://github.com/BYVoid/OpenCC\">Open Chinese Convert</a></li>\n<li><a href=\"http://www.linuxdown.net/install/soft/2016/0122/4445.html\">繁体转简体，CentOS安装OpenCC，升级到gcc4.6</a></li>\n<li><a href=\"https://lempstacker.com/tw/Compile-and-Install-OpenCC-on-Minimal-CentOS7/\">Compile and Install OpenCC on Minimal CentOS 7</a></li>\n</ul>\n","text":"Compile and Install OpenCC on Minimal CentOS 7測試過程在虛擬機中進行，使用vm搭建，操作系統版本CentOS Li...","permalink":"/post/ml-jieba-opencc","photos":[],"count_time":{"symbolsCount":"4.5k","symbolsTime":"4 mins."},"categories":[{"name":"NLP","slug":"NLP","count":2,"path":"api/categories/NLP.json"}],"tags":[{"name":"NLP","slug":"NLP","count":2,"path":"api/tags/NLP.json"},{"name":"Jieba","slug":"Jieba","count":2,"path":"api/tags/Jieba.json"},{"name":"Linux","slug":"Linux","count":3,"path":"api/tags/Linux.json"},{"name":"ML","slug":"ML","count":1,"path":"api/tags/ML.json"},{"name":"OpenCC","slug":"OpenCC","count":2,"path":"api/tags/OpenCC.json"},{"name":"CentOS","slug":"CentOS","count":2,"path":"api/tags/CentOS.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Compile-and-Install-OpenCC-on-Minimal-CentOS-7\"><span class=\"toc-text\">Compile and Install OpenCC on Minimal CentOS 7</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Downloading-Uncompressing\"><span class=\"toc-text\">Downloading &amp; Uncompressing</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Compilation\"><span class=\"toc-text\">Compilation</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Usage\"><span class=\"toc-text\">Usage</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Usage-Example\"><span class=\"toc-text\">Usage Example</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#References\"><span class=\"toc-text\">References</span></a></li></ol></li></ol>","author":{"name":"Kevin","slug":"blog-author","avatar":"/static/kevin_logo_x_s1.png","link":"/","description":"AI/FS/BD/WEB/New Media","socials":{"github":"https://github.com/SuiKevin","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Ubuntu/Python 结巴分词 + Word2Vec利用维基百科训练词向量","uid":"882d31fc168f9dee83d771cd41dd9d18","slug":"jieba-word2vec","date":"2024-11-18T05:40:13.000Z","updated":"2025-03-22T06:18:47.282Z","comments":true,"path":"api/articles/jieba-word2vec.json","keywords":null,"cover":null,"text":"Ubuntu/Python 结巴分词 + Word2Vec利用维基百科训练词向量结巴分词是一个跨语言的中文分词器，整体效果还算不错，功能也够用，这里直接用Pyt...","permalink":"/post/jieba-word2vec","photos":[],"count_time":{"symbolsCount":"10k","symbolsTime":"9 mins."},"categories":[{"name":"NLP","slug":"NLP","count":2,"path":"api/categories/NLP.json"}],"tags":[{"name":"NLP","slug":"NLP","count":2,"path":"api/tags/NLP.json"},{"name":"Jieba","slug":"Jieba","count":2,"path":"api/tags/Jieba.json"},{"name":"Word2Vec","slug":"Word2Vec","count":1,"path":"api/tags/Word2Vec.json"},{"name":"Linux","slug":"Linux","count":3,"path":"api/tags/Linux.json"},{"name":"Ubuntu","slug":"Ubuntu","count":1,"path":"api/tags/Ubuntu.json"},{"name":"Python","slug":"Python","count":1,"path":"api/tags/Python.json"}],"author":{"name":"Kevin","slug":"blog-author","avatar":"/static/kevin_logo_x_s1.png","link":"/","description":"AI/FS/BD/WEB/New Media","socials":{"github":"https://github.com/SuiKevin","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"关于`SparkLivy`和`ZeppelinNotebook`访问`HDFS`时的多用户权限控制","uid":"fa8de5b59170093e2dea98ffe77b6754","slug":"sparklivy-zeppelin-hdfs-mutil-user-auth","date":"2017-12-09T09:29:08.000Z","updated":"2025-03-22T06:15:39.503Z","comments":true,"path":"api/articles/sparklivy-zeppelin-hdfs-mutil-user-auth.json","keywords":null,"cover":null,"text":"关于SparkLivy和ZeppelinNotebook访问HDFS时的多用户权限控制SparkLivy在Yarn上运行应用时，默认使用的用户是Livy。 Ze...","permalink":"/post/sparklivy-zeppelin-hdfs-mutil-user-auth","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"Big Data","slug":"Big-Data","count":6,"path":"api/categories/Big-Data.json"}],"tags":[{"name":"Hadoop","slug":"Hadoop","count":5,"path":"api/tags/Hadoop.json"},{"name":"Zeppelin","slug":"Zeppelin","count":3,"path":"api/tags/Zeppelin.json"},{"name":"SparkLivy","slug":"SparkLivy","count":1,"path":"api/tags/SparkLivy.json"},{"name":"Zeppelin Notebook","slug":"Zeppelin-Notebook","count":1,"path":"api/tags/Zeppelin-Notebook.json"},{"name":"HDFS","slug":"HDFS","count":1,"path":"api/tags/HDFS.json"},{"name":"Mutil User","slug":"Mutil-User","count":1,"path":"api/tags/Mutil-User.json"},{"name":"Auth","slug":"Auth","count":1,"path":"api/tags/Auth.json"}],"author":{"name":"Kevin","slug":"blog-author","avatar":"/static/kevin_logo_x_s1.png","link":"/","description":"AI/FS/BD/WEB/New Media","socials":{"github":"https://github.com/SuiKevin","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}